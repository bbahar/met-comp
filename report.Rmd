---
title: "Method comparison"
author: "Bahar"
date: "`r Sys.Date()`"
output: html_document
---

Assessing aggreement between `r input$xlab` and `r input$ylab` measuments by means of Bland-Altman plot.

```{r BA plot, echo=FALSE}
library(mcr)
a <- datasetInput()
    if (is.null(a)) {
      return(NULL)} else {
        names(a) <- c("M1", "M2")
        data1 <- mcreg(a$M1,a$M2,
                      mref.name=input$xlab,
                      mtest.name=input$ylab)
        MCResult.plotDifference(data1, plot.type=input$batype)
      }
```

Comparison of `r input$xlab` and `r input$ylab` measurements using regression analysis.

```{r regression plot, echo=FALSE}
library(mcr)
a <- datasetInput()
    if (is.null(a)) {
      return(NULL)} else {
        names(a) <- c("M1", "M2")
        data1<- mcreg(a$M1,a$M2, error.ratio = input$syx, 
                      method.reg = input$regmodel, method.ci = input$cimethod,
                      method.bootstrap.ci = input$metbootci)
        MCResult.plot(data1, ci.area=input$ciarea, 
             add.legend=input$legend, identity=input$identity,
             add.cor=input$addcor, x.lab=input$xlab,
             y.lab=input$ylab, cor.method=input$cormet 
             )
      }
```

```{r statistics, echo=FALSE}
library(mcr)
a <- datasetInput()
    if (is.null(a)) {
      return(NULL)} else {
        names(a) <- c("M1", "M2")
        data1 <- mcreg(a$M1,a$M2, error.ratio=input$syx, 
                      method.reg=input$regmodel, method.ci=input$cimethod,
                      method.bootstrap.ci = input$metbootci,
                      mref.name = input$xlab, mtest.name = input$ylab)
        printSummary(data1)
      }
```

Data is processed using `r R.version.string` and mcr package `r packageVersion('mcr')`.
